{"ast":null,"code":"var _jsxFileName = \"/Users/deepanshutyagi/Desktop/programs/Election_website/panel_admin/src/components/StudentVotingPage.js\",\n  _s = $RefreshSig$();\n// src/components/StudentVotingPage.js\nimport React, { useState, useEffect } from 'react';\nimport { Link, useParams, useNavigate } from 'react-router-dom';\nimport { db } from '../firebase';\nimport { collection, query, where, getDocs, doc, getDoc, addDoc, updateDoc, increment, serverTimestamp } from 'firebase/firestore';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction StudentVotingPage() {\n  _s();\n  var _student$name;\n  const {\n    positionId\n  } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState('');\n  const [student, setStudent] = useState(null);\n  const [position, setPosition] = useState(null);\n  const [candidates, setCandidates] = useState([]);\n  const [selectedCandidate, setSelectedCandidate] = useState(null);\n  const [showConfirmation, setShowConfirmation] = useState(false);\n  const [voteSubmitted, setVoteSubmitted] = useState(false);\n  const [receiptData, setReceiptData] = useState(null);\n\n  // Get email from local storage\n  const email = localStorage.getItem('studentEmail');\n\n  // Load position and candidates data\n  useEffect(() => {\n    const fetchData = async () => {\n      if (!email || !positionId) {\n        navigate('/student/dashboard');\n        return;\n      }\n      try {\n        setLoading(true);\n\n        // Fetch student data\n        const studentsRef = collection(db, 'students');\n        const studentQuery = query(studentsRef, where(\"email\", \"==\", email));\n        const querySnapshot = await getDocs(studentQuery);\n        if (querySnapshot.empty) {\n          navigate('/student/profile');\n          return;\n        }\n        const studentDoc = querySnapshot.docs[0];\n        const studentData = {\n          id: studentDoc.id,\n          ...studentDoc.data()\n        };\n        setStudent(studentData);\n\n        // Check if this position has already been voted for\n        const votesRef = collection(db, 'votes');\n        const votesQuery = query(votesRef, where(\"studentId\", \"==\", studentData.id), where(\"positionId\", \"==\", positionId));\n        const votesSnapshot = await getDocs(votesQuery);\n        if (!votesSnapshot.empty) {\n          // User has already voted for this position\n          setError('You have already voted for this position.');\n          setLoading(false);\n          return;\n        }\n\n        // Fetch position data\n        const positionDoc = await getDoc(doc(db, 'positions', positionId));\n        if (!positionDoc.exists()) {\n          setError('Position not found.');\n          setLoading(false);\n          return;\n        }\n        const positionData = {\n          id: positionDoc.id,\n          ...positionDoc.data()\n        };\n        setPosition(positionData);\n\n        // Check if election is active\n        const settingsDoc = await getDoc(doc(db, 'settings', 'election'));\n        if (!settingsDoc.exists() || !settingsDoc.data().active) {\n          setError('Voting is currently not active.');\n          setLoading(false);\n          return;\n        }\n\n        // Check student eligibility for this position\n        const isEligibleByYear = positionData.category === studentData.year;\n        const isEligibleByDepartment = !positionData.departmentSpecific || !positionData.department || positionData.department === studentData.department;\n        const isGenderEligible = !positionData.gender || positionData.gender === 'Any Gender' || positionData.gender === studentData.gender || positionData.gender === 'Gender Neutral';\n        if (!isEligibleByYear || !isEligibleByDepartment || !isGenderEligible) {\n          setError('You are not eligible to vote for this position.');\n          setLoading(false);\n          return;\n        }\n\n        // Fetch candidates for this position\n        const candidatesRef = collection(db, 'candidates');\n        const candidatesQuery = query(candidatesRef, where(\"position\", \"==\", positionData.name), where(\"status\", \"==\", \"Active\"));\n        const candidatesSnapshot = await getDocs(candidatesQuery);\n        if (candidatesSnapshot.empty) {\n          setError('No candidates are available for this position.');\n          setLoading(false);\n          return;\n        }\n        const candidatesData = candidatesSnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setCandidates(candidatesData);\n        setLoading(false);\n      } catch (error) {\n        console.error(\"Error loading voting data:\", error);\n        setError('Failed to load voting data. Please try again later.');\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [email, positionId, navigate]);\n\n  // Handle candidate selection\n  const handleCandidateSelection = candidateId => {\n    setSelectedCandidate(candidateId);\n  };\n\n  // Prepare for vote submission - show confirmation\n  const prepareSubmitVote = () => {\n    if (!selectedCandidate) {\n      setError('Please select a candidate.');\n      return;\n    }\n    setError('');\n    setShowConfirmation(true);\n  };\n\n  // Cancel vote submission\n  const cancelSubmit = () => {\n    setShowConfirmation(false);\n  };\n\n  // Generate a unique receipt ID\n  const generateReceiptId = () => {\n    const timestamp = Date.now().toString();\n    const randomStr = Math.random().toString(36).substring(2, 8).toUpperCase();\n    return `VOTE-${timestamp.slice(-6)}-${randomStr}`;\n  };\n\n  // Submit vote\n  const submitVote = async () => {\n    if (!selectedCandidate) {\n      setError('Please select a candidate.');\n      return;\n    }\n    setSubmitting(true);\n    setError('');\n    try {\n      // Generate receipt ID\n      const receiptId = generateReceiptId();\n\n      // Add vote to Firestore\n      const voteRef = await addDoc(collection(db, 'votes'), {\n        studentId: student.id,\n        studentName: student.name,\n        positionId: position.id,\n        positionName: position.name,\n        candidateId: selectedCandidate,\n        timestamp: serverTimestamp(),\n        receiptId: receiptId\n      });\n\n      // Update vote count for the candidate\n      const candidateRef = doc(db, 'candidates', selectedCandidate);\n      await updateDoc(candidateRef, {\n        voteCount: increment(1)\n      });\n\n      // Get selected candidate details for receipt\n      const selectedCandidateData = candidates.find(candidate => candidate.id === selectedCandidate);\n\n      // Prepare receipt data\n      const receiptInfo = {\n        receiptId: receiptId,\n        studentName: student.name,\n        studentId: student.rollNumber,\n        positionName: position.name,\n        candidateName: selectedCandidateData.name,\n        timestamp: new Date().toLocaleString()\n      };\n      setReceiptData(receiptInfo);\n      setVoteSubmitted(true);\n      setShowConfirmation(false);\n    } catch (error) {\n      console.error(\"Error submitting vote:\", error);\n      setError('Failed to submit your vote. Please try again.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // Return to dashboard\n  const returnToDashboard = () => {\n    navigate('/student/dashboard');\n  };\n\n  // Logout function\n  const handleLogout = () => {\n    localStorage.removeItem('studentEmail');\n    navigate('/');\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-100 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-4 text-gray-700\",\n          children: \"Loading voting page...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-blue-900 text-white\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mx-auto px-4 py-4 flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold\",\n          children: \"College Election System\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: (student === null || student === void 0 ? void 0 : student.name) || 'Student'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-10 h-10 rounded-full bg-blue-700 flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-white font-medium\",\n              children: (student === null || student === void 0 ? void 0 : (_student$name = student.name) === null || _student$name === void 0 ? void 0 : _student$name.charAt(0)) || 'S'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n        className: \"w-64 bg-white shadow-md hidden sm:block\",\n        children: /*#__PURE__*/_jsxDEV(\"nav\", {\n          className: \"mt-10 px-2\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/student/dashboard\",\n            className: \"block py-3 px-4 rounded-md hover:bg-gray-100 text-gray-700 mb-1\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-5 w-5 mr-3\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M4 6h16M4 12h8m-8 6h16\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Dashboard\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/student/profile\",\n            className: \"block py-3 px-4 rounded-md hover:bg-gray-100 text-gray-700 mb-1\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-5 w-5 mr-3\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"My Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/student/results\",\n            className: \"block py-3 px-4 rounded-md hover:bg-gray-100 text-gray-700 mb-1\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-5 w-5 mr-3\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Results\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogout,\n            className: \"w-full text-left block py-3 px-4 rounded-md hover:bg-gray-100 text-gray-700\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-5 w-5 mr-3\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Logout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"flex-1 p-4 md:p-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sm:hidden mb-4\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/student/dashboard\",\n            className: \"flex items-center text-blue-600\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              className: \"h-5 w-5 mr-1\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M15 19l-7-7 7-7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this), \"Back to Dashboard\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6\",\n          role: \"alert\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this), (error.includes('already voted') || error.includes('not eligible') || error.includes('No candidates')) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: returnToDashboard,\n              className: \"bg-red-600 hover:bg-red-700 text-white py-1 px-3 rounded text-sm\",\n              children: \"Return to Dashboard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this), voteSubmitted ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md overflow-hidden\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-green-500 text-white px-6 py-4\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold\",\n              children: \"Vote Submitted Successfully!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-green-50 border border-green-200 rounded-lg p-6 mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-medium text-gray-800\",\n                  children: \"Vote Receipt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-500\",\n                  children: [\"Receipt ID: \", receiptData === null || receiptData === void 0 ? void 0 : receiptData.receiptId]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border-t border-gray-200 pt-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-500\",\n                      children: \"Student Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 360,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-medium\",\n                      children: receiptData === null || receiptData === void 0 ? void 0 : receiptData.studentName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 361,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 359,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-500\",\n                      children: \"Student ID\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 364,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-medium\",\n                      children: receiptData === null || receiptData === void 0 ? void 0 : receiptData.studentId\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 365,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 363,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-500\",\n                      children: \"Position\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 368,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-medium\",\n                      children: receiptData === null || receiptData === void 0 ? void 0 : receiptData.positionName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 369,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 367,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-500\",\n                      children: \"Date & Time\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 372,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-medium\",\n                      children: receiptData === null || receiptData === void 0 ? void 0 : receiptData.timestamp\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 373,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 371,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: \"Vote Cast For\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 378,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-2 bg-blue-50 text-blue-700 px-3 py-2 rounded-md inline-block\",\n                    children: receiptData === null || receiptData === void 0 ? void 0 : receiptData.candidateName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 379,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center my-4 p-4 border border-green-200 bg-green-50 rounded-lg\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-green-700 font-medium\",\n                  children: \"Your vote has been securely recorded. Keep this receipt for your records.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: returnToDashboard,\n                className: \"bg-blue-600 hover:bg-blue-700 text-white py-2 px-6 rounded-md\",\n                children: \"Return to Dashboard\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md overflow-hidden\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-600 text-white px-6 py-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold\",\n              children: [\"Vote for: \", position === null || position === void 0 ? void 0 : position.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-blue-100 text-sm\",\n              children: position === null || position === void 0 ? void 0 : position.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-blue-800\",\n                children: [\"Select a candidate for this position. Your vote is confidential and secure.\", (position === null || position === void 0 ? void 0 : position.vacancies) > 1 && ` This position has ${position.vacancies} vacancies.`]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 17\n            }, this), showConfirmation ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border rounded-lg p-6 mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-medium text-gray-800 mb-4\",\n                children: \"Confirm Your Selection\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600 mb-4\",\n                children: \"You're about to vote for:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-6\",\n                children: candidates.filter(candidate => candidate.id === selectedCandidate).map(candidate => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center bg-blue-50 p-3 rounded-md\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    className: \"h-5 w-5 text-green-500 mr-2\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    viewBox: \"0 0 24 24\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      strokeWidth: \"2\",\n                      d: \"M5 13l4 4L19 7\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 433,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 427,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: candidate.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 440,\n                    columnNumber: 27\n                  }, this), candidate.gender && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-2 text-sm text-gray-500\",\n                    children: [\"(\", candidate.gender, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 441,\n                    columnNumber: 48\n                  }, this)]\n                }, candidate.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600 mb-6\",\n                children: \"This action cannot be undone after submission. Are you sure you want to proceed?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex space-x-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded-md\",\n                  onClick: cancelSubmit,\n                  children: \"Go Back\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-md flex items-center\",\n                  onClick: submitVote,\n                  disabled: submitting,\n                  children: submitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                      className: \"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",\n                      xmlns: \"http://www.w3.org/2000/svg\",\n                      fill: \"none\",\n                      viewBox: \"0 0 24 24\",\n                      children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                        className: \"opacity-25\",\n                        cx: \"12\",\n                        cy: \"12\",\n                        r: \"10\",\n                        stroke: \"currentColor\",\n                        strokeWidth: \"4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 465,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                        className: \"opacity-75\",\n                        fill: \"currentColor\",\n                        d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 466,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 464,\n                      columnNumber: 29\n                    }, this), \"Submitting...\"]\n                  }, void 0, true) : 'Confirm Vote'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 gap-4 mb-6\",\n                children: candidates.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-span-1 text-center py-8 text-gray-500\",\n                  children: \"No candidates available for this position.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 25\n                }, this) : candidates.map(candidate => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `p-4 rounded-md border-2 cursor-pointer transition-all ${selectedCandidate === candidate.id ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-gray-300'}`,\n                  onClick: () => handleCandidateSelection(candidate.id),\n                  tabIndex: \"0\",\n                  role: \"button\",\n                  \"aria-pressed\": selectedCandidate === candidate.id,\n                  onKeyDown: e => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                      handleCandidateSelection(candidate.id);\n                      e.preventDefault();\n                    }\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: `w-6 h-6 rounded-full border flex items-center justify-center mr-3 ${selectedCandidate === candidate.id ? 'bg-blue-500 border-blue-500' : 'border-gray-300'}`,\n                      children: selectedCandidate === candidate.id && /*#__PURE__*/_jsxDEV(\"svg\", {\n                        className: \"w-4 h-4 text-white\",\n                        fill: \"currentColor\",\n                        viewBox: \"0 0 20 20\",\n                        children: /*#__PURE__*/_jsxDEV(\"path\", {\n                          fillRule: \"evenodd\",\n                          d: \"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\",\n                          clipRule: \"evenodd\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 509,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 508,\n                        columnNumber: 35\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 502,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"font-medium text-gray-800\",\n                        children: candidate.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 514,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-sm text-gray-500 mt-1\",\n                        children: [candidate.year && /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"inline-block mr-3\",\n                          children: candidate.year\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 517,\n                          columnNumber: 37\n                        }, this), candidate.gender && /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"inline-block\",\n                          children: candidate.gender\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 520,\n                          columnNumber: 37\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 515,\n                        columnNumber: 33\n                      }, this), candidate.manifesto && /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-sm text-gray-600 mt-2\",\n                        children: candidate.manifesto\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 524,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 513,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 501,\n                    columnNumber: 29\n                  }, this)\n                }, candidate.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 27\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/student/dashboard\",\n                  className: \"bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded-md\",\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 534,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: `py-2 px-4 rounded-md ${selectedCandidate ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-gray-300 text-gray-500 cursor-not-allowed'}`,\n                  onClick: prepareSubmitVote,\n                  disabled: !selectedCandidate,\n                  children: \"Continue\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 540,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 261,\n    columnNumber: 5\n  }, this);\n}\n_s(StudentVotingPage, \"rodFqqgDDGEZU2Bgjpi9Vzkp51s=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = StudentVotingPage;\nexport default StudentVotingPage;\nvar _c;\n$RefreshReg$(_c, \"StudentVotingPage\");","map":{"version":3,"names":["React","useState","useEffect","Link","useParams","useNavigate","db","collection","query","where","getDocs","doc","getDoc","addDoc","updateDoc","increment","serverTimestamp","jsxDEV","_jsxDEV","Fragment","_Fragment","StudentVotingPage","_s","_student$name","positionId","navigate","loading","setLoading","submitting","setSubmitting","error","setError","student","setStudent","position","setPosition","candidates","setCandidates","selectedCandidate","setSelectedCandidate","showConfirmation","setShowConfirmation","voteSubmitted","setVoteSubmitted","receiptData","setReceiptData","email","localStorage","getItem","fetchData","studentsRef","studentQuery","querySnapshot","empty","studentDoc","docs","studentData","id","data","votesRef","votesQuery","votesSnapshot","positionDoc","exists","positionData","settingsDoc","active","isEligibleByYear","category","year","isEligibleByDepartment","departmentSpecific","department","isGenderEligible","gender","candidatesRef","candidatesQuery","name","candidatesSnapshot","candidatesData","map","console","handleCandidateSelection","candidateId","prepareSubmitVote","cancelSubmit","generateReceiptId","timestamp","Date","now","toString","randomStr","Math","random","substring","toUpperCase","slice","submitVote","receiptId","voteRef","studentId","studentName","positionName","candidateRef","voteCount","selectedCandidateData","find","candidate","receiptInfo","rollNumber","candidateName","toLocaleString","returnToDashboard","handleLogout","removeItem","className","children","fileName","_jsxFileName","lineNumber","columnNumber","charAt","to","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","onClick","role","includes","vacancies","filter","type","disabled","cx","cy","r","length","tabIndex","onKeyDown","e","key","preventDefault","fillRule","clipRule","manifesto","_c","$RefreshReg$"],"sources":["/Users/deepanshutyagi/Desktop/programs/Election_website/panel_admin/src/components/StudentVotingPage.js"],"sourcesContent":["// src/components/StudentVotingPage.js\nimport React, { useState, useEffect } from 'react';\nimport { Link, useParams, useNavigate } from 'react-router-dom';\nimport { db } from '../firebase';\nimport { \n  collection, \n  query, \n  where, \n  getDocs, \n  doc, \n  getDoc, \n  addDoc,\n  updateDoc,\n  increment,\n  serverTimestamp \n} from 'firebase/firestore';\n\nfunction StudentVotingPage() {\n  const { positionId } = useParams();\n  const navigate = useNavigate();\n  \n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState('');\n  const [student, setStudent] = useState(null);\n  const [position, setPosition] = useState(null);\n  const [candidates, setCandidates] = useState([]);\n  const [selectedCandidate, setSelectedCandidate] = useState(null);\n  const [showConfirmation, setShowConfirmation] = useState(false);\n  const [voteSubmitted, setVoteSubmitted] = useState(false);\n  const [receiptData, setReceiptData] = useState(null);\n\n  // Get email from local storage\n  const email = localStorage.getItem('studentEmail');\n\n  // Load position and candidates data\n  useEffect(() => {\n    const fetchData = async () => {\n      if (!email || !positionId) {\n        navigate('/student/dashboard');\n        return;\n      }\n\n      try {\n        setLoading(true);\n        \n        // Fetch student data\n        const studentsRef = collection(db, 'students');\n        const studentQuery = query(studentsRef, where(\"email\", \"==\", email));\n        const querySnapshot = await getDocs(studentQuery);\n\n        if (querySnapshot.empty) {\n          navigate('/student/profile');\n          return;\n        }\n\n        const studentDoc = querySnapshot.docs[0];\n        const studentData = {\n          id: studentDoc.id,\n          ...studentDoc.data()\n        };\n        setStudent(studentData);\n\n        // Check if this position has already been voted for\n        const votesRef = collection(db, 'votes');\n        const votesQuery = query(\n          votesRef, \n          where(\"studentId\", \"==\", studentData.id),\n          where(\"positionId\", \"==\", positionId)\n        );\n        const votesSnapshot = await getDocs(votesQuery);\n        \n        if (!votesSnapshot.empty) {\n          // User has already voted for this position\n          setError('You have already voted for this position.');\n          setLoading(false);\n          return;\n        }\n\n        // Fetch position data\n        const positionDoc = await getDoc(doc(db, 'positions', positionId));\n        if (!positionDoc.exists()) {\n          setError('Position not found.');\n          setLoading(false);\n          return;\n        }\n        \n        const positionData = {\n          id: positionDoc.id,\n          ...positionDoc.data()\n        };\n        setPosition(positionData);\n\n        // Check if election is active\n        const settingsDoc = await getDoc(doc(db, 'settings', 'election'));\n        if (!settingsDoc.exists() || !settingsDoc.data().active) {\n          setError('Voting is currently not active.');\n          setLoading(false);\n          return;\n        }\n\n        // Check student eligibility for this position\n        const isEligibleByYear = positionData.category === studentData.year;\n        const isEligibleByDepartment = \n          !positionData.departmentSpecific || \n          !positionData.department || \n          positionData.department === studentData.department;\n        \n        const isGenderEligible = \n          !positionData.gender || \n          positionData.gender === 'Any Gender' || \n          positionData.gender === studentData.gender ||\n          positionData.gender === 'Gender Neutral';\n\n        if (!isEligibleByYear || !isEligibleByDepartment || !isGenderEligible) {\n          setError('You are not eligible to vote for this position.');\n          setLoading(false);\n          return;\n        }\n\n        // Fetch candidates for this position\n        const candidatesRef = collection(db, 'candidates');\n        const candidatesQuery = query(\n          candidatesRef, \n          where(\"position\", \"==\", positionData.name),\n          where(\"status\", \"==\", \"Active\")\n        );\n        const candidatesSnapshot = await getDocs(candidatesQuery);\n        \n        if (candidatesSnapshot.empty) {\n          setError('No candidates are available for this position.');\n          setLoading(false);\n          return;\n        }\n\n        const candidatesData = candidatesSnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        \n        setCandidates(candidatesData);\n        setLoading(false);\n      } catch (error) {\n        console.error(\"Error loading voting data:\", error);\n        setError('Failed to load voting data. Please try again later.');\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [email, positionId, navigate]);\n\n  // Handle candidate selection\n  const handleCandidateSelection = (candidateId) => {\n    setSelectedCandidate(candidateId);\n  };\n\n  // Prepare for vote submission - show confirmation\n  const prepareSubmitVote = () => {\n    if (!selectedCandidate) {\n      setError('Please select a candidate.');\n      return;\n    }\n    \n    setError('');\n    setShowConfirmation(true);\n  };\n\n  // Cancel vote submission\n  const cancelSubmit = () => {\n    setShowConfirmation(false);\n  };\n\n  // Generate a unique receipt ID\n  const generateReceiptId = () => {\n    const timestamp = Date.now().toString();\n    const randomStr = Math.random().toString(36).substring(2, 8).toUpperCase();\n    return `VOTE-${timestamp.slice(-6)}-${randomStr}`;\n  };\n\n  // Submit vote\n  const submitVote = async () => {\n    if (!selectedCandidate) {\n      setError('Please select a candidate.');\n      return;\n    }\n\n    setSubmitting(true);\n    setError('');\n\n    try {\n      // Generate receipt ID\n      const receiptId = generateReceiptId();\n      \n      // Add vote to Firestore\n      const voteRef = await addDoc(collection(db, 'votes'), {\n        studentId: student.id,\n        studentName: student.name,\n        positionId: position.id,\n        positionName: position.name,\n        candidateId: selectedCandidate,\n        timestamp: serverTimestamp(),\n        receiptId: receiptId\n      });\n\n      // Update vote count for the candidate\n      const candidateRef = doc(db, 'candidates', selectedCandidate);\n      await updateDoc(candidateRef, {\n        voteCount: increment(1)\n      });\n      \n      // Get selected candidate details for receipt\n      const selectedCandidateData = candidates.find(\n        candidate => candidate.id === selectedCandidate\n      );\n      \n      // Prepare receipt data\n      const receiptInfo = {\n        receiptId: receiptId,\n        studentName: student.name,\n        studentId: student.rollNumber,\n        positionName: position.name,\n        candidateName: selectedCandidateData.name,\n        timestamp: new Date().toLocaleString()\n      };\n      \n      setReceiptData(receiptInfo);\n      setVoteSubmitted(true);\n      setShowConfirmation(false);\n    } catch (error) {\n      console.error(\"Error submitting vote:\", error);\n      setError('Failed to submit your vote. Please try again.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // Return to dashboard\n  const returnToDashboard = () => {\n    navigate('/student/dashboard');\n  };\n\n  // Logout function\n  const handleLogout = () => {\n    localStorage.removeItem('studentEmail');\n    navigate('/');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-700\">Loading voting page...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex flex-col\">\n      {/* Header */}\n      <header className=\"bg-blue-900 text-white\">\n        <div className=\"container mx-auto px-4 py-4 flex justify-between items-center\">\n          <h1 className=\"text-2xl font-bold\">College Election System</h1>\n          <div className=\"flex items-center space-x-4\">\n            <span>{student?.name || 'Student'}</span>\n            <div className=\"w-10 h-10 rounded-full bg-blue-700 flex items-center justify-center\">\n              <span className=\"text-white font-medium\">{student?.name?.charAt(0) || 'S'}</span>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"flex flex-1\">\n        {/* Sidebar */}\n        <aside className=\"w-64 bg-white shadow-md hidden sm:block\">\n          <nav className=\"mt-10 px-2\">\n            <Link to=\"/student/dashboard\" className=\"block py-3 px-4 rounded-md hover:bg-gray-100 text-gray-700 mb-1\">\n              <div className=\"flex items-center\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h8m-8 6h16\" />\n                </svg>\n                <span>Dashboard</span>\n              </div>\n            </Link>\n            <Link to=\"/student/profile\" className=\"block py-3 px-4 rounded-md hover:bg-gray-100 text-gray-700 mb-1\">\n              <div className=\"flex items-center\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                </svg>\n                <span>My Profile</span>\n              </div>\n            </Link>\n            <Link to=\"/student/results\" className=\"block py-3 px-4 rounded-md hover:bg-gray-100 text-gray-700 mb-1\">\n              <div className=\"flex items-center\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                </svg>\n                <span>Results</span>\n              </div>\n            </Link>\n            <button \n              onClick={handleLogout}\n              className=\"w-full text-left block py-3 px-4 rounded-md hover:bg-gray-100 text-gray-700\"\n            >\n              <div className=\"flex items-center\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n                </svg>\n                <span>Logout</span>\n              </div>\n            </button>\n          </nav>\n        </aside>\n\n        {/* Main Content */}\n        <main className=\"flex-1 p-4 md:p-8\">\n          {/* Mobile menu button */}\n          <div className=\"sm:hidden mb-4\">\n            <Link to=\"/student/dashboard\" className=\"flex items-center text-blue-600\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n              Back to Dashboard\n            </Link>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6\" role=\"alert\">\n              <p>{error}</p>\n              {(error.includes('already voted') || error.includes('not eligible') || error.includes('No candidates')) && (\n                <div className=\"mt-3\">\n                  <button \n                    onClick={returnToDashboard}\n                    className=\"bg-red-600 hover:bg-red-700 text-white py-1 px-3 rounded text-sm\"\n                  >\n                    Return to Dashboard\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n\n          {voteSubmitted ? (\n            <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n              <div className=\"bg-green-500 text-white px-6 py-4\">\n                <h2 className=\"text-xl font-semibold\">Vote Submitted Successfully!</h2>\n              </div>\n              <div className=\"p-6\">\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-6 mb-6\">\n                  <div className=\"flex justify-between items-center mb-4\">\n                    <h3 className=\"text-lg font-medium text-gray-800\">Vote Receipt</h3>\n                    <span className=\"text-sm text-gray-500\">Receipt ID: {receiptData?.receiptId}</span>\n                  </div>\n                  \n                  <div className=\"border-t border-gray-200 pt-4\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <p className=\"text-sm text-gray-500\">Student Name</p>\n                        <p className=\"font-medium\">{receiptData?.studentName}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-gray-500\">Student ID</p>\n                        <p className=\"font-medium\">{receiptData?.studentId}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-gray-500\">Position</p>\n                        <p className=\"font-medium\">{receiptData?.positionName}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-gray-500\">Date & Time</p>\n                        <p className=\"font-medium\">{receiptData?.timestamp}</p>\n                      </div>\n                    </div>\n                    \n                    <div className=\"mt-4\">\n                      <p className=\"text-sm text-gray-500\">Vote Cast For</p>\n                      <div className=\"mt-2 bg-blue-50 text-blue-700 px-3 py-2 rounded-md inline-block\">\n                        {receiptData?.candidateName}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"text-center my-4 p-4 border border-green-200 bg-green-50 rounded-lg\">\n                    <p className=\"text-green-700 font-medium\">\n                      Your vote has been securely recorded. Keep this receipt for your records.\n                    </p>\n                  </div>\n                </div>\n                \n                <div className=\"flex justify-center\">\n                  <button\n                    onClick={returnToDashboard}\n                    className=\"bg-blue-600 hover:bg-blue-700 text-white py-2 px-6 rounded-md\"\n                  >\n                    Return to Dashboard\n                  </button>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n              <div className=\"bg-blue-600 text-white px-6 py-4\">\n                <h2 className=\"text-xl font-semibold\">Vote for: {position?.name}</h2>\n                <p className=\"text-blue-100 text-sm\">{position?.category}</p>\n              </div>\n              \n              <div className=\"p-6\">\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\n                  <p className=\"text-sm text-blue-800\">\n                    Select a candidate for this position. Your vote is confidential and secure.\n                    {position?.vacancies > 1 && \n                      ` This position has ${position.vacancies} vacancies.`}\n                  </p>\n                </div>\n                \n                {showConfirmation ? (\n                  <div className=\"border rounded-lg p-6 mb-6\">\n                    <h3 className=\"text-lg font-medium text-gray-800 mb-4\">Confirm Your Selection</h3>\n                    <p className=\"text-gray-600 mb-4\">\n                      You're about to vote for:\n                    </p>\n                    <div className=\"mb-6\">\n                      {candidates.filter(candidate => candidate.id === selectedCandidate).map(candidate => (\n                        <div key={candidate.id} className=\"flex items-center bg-blue-50 p-3 rounded-md\">\n                          <svg \n                            className=\"h-5 w-5 text-green-500 mr-2\"\n                            fill=\"none\" \n                            stroke=\"currentColor\" \n                            viewBox=\"0 0 24 24\"\n                          >\n                            <path \n                              strokeLinecap=\"round\" \n                              strokeLinejoin=\"round\" \n                              strokeWidth=\"2\" \n                              d=\"M5 13l4 4L19 7\"\n                            />\n                          </svg>\n                          <span className=\"font-medium\">{candidate.name}</span>\n                          {candidate.gender && <span className=\"ml-2 text-sm text-gray-500\">({candidate.gender})</span>}\n                        </div>\n                      ))}\n                    </div>\n                    <p className=\"text-gray-600 mb-6\">\n                      This action cannot be undone after submission. Are you sure you want to proceed?\n                    </p>\n                    <div className=\"flex space-x-4\">\n                      <button\n                        type=\"button\"\n                        className=\"bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded-md\"\n                        onClick={cancelSubmit}\n                      >\n                        Go Back\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-md flex items-center\"\n                        onClick={submitVote}\n                        disabled={submitting}\n                      >\n                        {submitting ? (\n                          <>\n                            <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                              <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                              <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                            </svg>\n                            Submitting...\n                          </>\n                        ) : 'Confirm Vote'}\n                      </button>\n                    </div>\n                  </div>\n                ) : (\n                  <>\n                    <div className=\"grid grid-cols-1 gap-4 mb-6\">\n                      {candidates.length === 0 ? (\n                        <div className=\"col-span-1 text-center py-8 text-gray-500\">\n                          No candidates available for this position.\n                        </div>\n                      ) : (\n                        candidates.map(candidate => (\n                          <div \n                            key={candidate.id} \n                            className={`p-4 rounded-md border-2 cursor-pointer transition-all ${\n                              selectedCandidate === candidate.id \n                                ? 'border-blue-500 bg-blue-50' \n                                : 'border-gray-200 hover:border-gray-300'\n                            }`}\n                            onClick={() => handleCandidateSelection(candidate.id)}\n                            tabIndex=\"0\"\n                            role=\"button\"\n                            aria-pressed={selectedCandidate === candidate.id}\n                            onKeyDown={(e) => {\n                              if (e.key === 'Enter' || e.key === ' ') {\n                                handleCandidateSelection(candidate.id);\n                                e.preventDefault();\n                              }\n                            }}\n                          >\n                            <div className=\"flex items-center\">\n                              <div className={`w-6 h-6 rounded-full border flex items-center justify-center mr-3 ${\n                                selectedCandidate === candidate.id\n                                  ? 'bg-blue-500 border-blue-500'\n                                  : 'border-gray-300'\n                              }`}>\n                                {selectedCandidate === candidate.id && (\n                                  <svg className=\"w-4 h-4 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                                  </svg>\n                                )}\n                              </div>\n                              <div>\n                                <p className=\"font-medium text-gray-800\">{candidate.name}</p>\n                                <div className=\"text-sm text-gray-500 mt-1\">\n                                  {candidate.year && (\n                                    <span className=\"inline-block mr-3\">{candidate.year}</span>\n                                  )}\n                                  {candidate.gender && (\n                                    <span className=\"inline-block\">{candidate.gender}</span>\n                                  )}\n                                </div>\n                                {candidate.manifesto && (\n                                  <p className=\"text-sm text-gray-600 mt-2\">{candidate.manifesto}</p>\n                                )}\n                              </div>\n                            </div>\n                          </div>\n                        ))\n                      )}\n                    </div>\n                    \n                    <div className=\"flex justify-between\">\n                      <Link\n                        to=\"/student/dashboard\"\n                        className=\"bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded-md\"\n                      >\n                        Cancel\n                      </Link>\n                      <button\n                        type=\"button\"\n                        className={`py-2 px-4 rounded-md ${\n                          selectedCandidate \n                            ? 'bg-blue-600 hover:bg-blue-700 text-white' \n                            : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                        }`}\n                        onClick={prepareSubmitVote}\n                        disabled={!selectedCandidate}\n                      >\n                        Continue\n                      </button>\n                    </div>\n                  </>\n                )}\n              </div>\n            </div>\n          )}\n        </main>\n      </div>\n    </div>\n  );\n}\n\nexport default StudentVotingPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}